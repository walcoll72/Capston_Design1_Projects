캡스톤디자인1 프로젝트
======================

- 공식 프로젝트 명            : 초음파 센서와 카메라 센서를 이용한 불법 주차 감지 및 신고 시스템
- 팀명(Team-Name)          : 김 천
- 결과물에 대한 브랜드명 : 차 빼



### Sensors

- ESP32_CAM
주차장에 ESP32-CAM을 설치하여, 차량 진입시 사진을 찍는다.
- HC-SR04 초음파 센서
차량이 들어오는것을 인식한다.

### 주요기술코드 

- 차량인식코드
- AWS서버코드
- 아두이노 AWS로 보내는 코드
- 앱 MYSQL 연동코드
  
### 진행상황

- ESP32-CAM을 통해 주차장 현황을 실시간으로 스트리밍하고, 스트리밍 되는 데이터를 AWS서버로 보내는것 성공
- Open CV를 안드로이드 모듈로 임포트 하여, Tesseract-OCR을 통해 안드로이드 앱 내에서 차량 번호 인식
- Mysql을 통해 Test DB를 만들고 안드로이드앱으로 json파일 보내는것 성공
- 최종적으로 완성해야 할 안드로이드 앱 프로토타입 개발

#### 진행상황 사진
- 차량번호인식사진
<img src="https://user-images.githubusercontent.com/60029337/82132929-6a6b1700-9820-11ea-92b1-e4e5e2254ec4.jpg" width="400">
<img src="https://user-images.githubusercontent.com/60029337/82132935-73f47f00-9820-11ea-8ef1-b599b2213637.jpg" width="400" >
<img src="https://user-images.githubusercontent.com/60029337/82132939-7c4cba00-9820-11ea-80e0-0bb4e09a73e2.jpg" width="400" >
<img src="https://user-images.githubusercontent.com/60029337/82132947-9be3e280-9820-11ea-8c86-bd2bbfc983f1.jpg" width="400" >
<img src="https://user-images.githubusercontent.com/60029337/82132950-9eded300-9820-11ea-9670-9f77625af9cc.jpg" width="200" >
- 안드로이드 DB 통신 사진
<img src="https://user-images.githubusercontent.com/60029337/82132957-ba49de00-9820-11ea-9397-a59415f7a5f8.jpg" width="200" >
- AWS를 통한 ESP32_CAM 스트리밍
<img src="https://user-images.githubusercontent.com/60029337/82133516-3398ff00-9828-11ea-9832-a88bcf5617b3.JPG" width="200" >

#### 진행중 문제점과 차후 진행 방향
- ESP32_CAM을 통해 차량 사진 데이터를 받아, 이미지 처리를 진행하려 했으나 앱으로 ESP32-CAM 사진데이터를 전달받는데 문제가 있어 핸드폰내 카메라를 이용하여 일단 구현했습니다. 이 부분은 개발을 계속 해 나가며 고쳐야 할 부분입니다.

- 차량번호 이미지 처리가 현재 미흡한 상황입니다. 차량번호를 인식하는데 까지는 성공하였으나, 이미지를 텍스트로 추출하는데 장애를 겪고 있습니다. 아마 현재 이용하고 있는 Tesseract-OCR의 한글인식률과 번호판 폰트에 대한 인식률이 떨어지는 것으로 보입니다. 이 부분은 학습을 통해 해결해 봐야겠다고 생각하고 있습니다.

- 차량번호 이미지 인식에 있어서, 각도에 따라 차량번호가 잘 인식이 되지 않는 문제가 있습니다. 이 부분도 차후 개선해 나갈 생각입니다.

- 여태까지 센서를 하나만 사용하다, 복수개의 센서를 동시에 사용해야 하는 상황을 해결하지 못하고 있습니다. 초음파 센서와 ESP32_CAM을 동시에 사용할 수 있는 방법을 검색을 통해 찾고 여러가지를 시도해보는 중입니다.

- 안드로이드 앱개발 경험이 처음이기에, 툴을 다루는 능력과 안드로이드 어플리케이션의 전체적인 구조를 파악하는것이 어려운 상황입니다. 검색을 통해 사용할만한 코드나 자료를 찾아도 우리가 개발중인 앱에 집어넣어 사용하기 어렵습니다. 익숙하게 다룰 수 있도록 계속 연습해야할 부분입니다.

#### 브레인스토밍
- 이미지 처리를 하는 방식
이미지 처리를 어떻게 할 것인지 계속해서 대화를 나눴습니다. 각자 검색을 통해서 시도해 볼만한 것들을 찾아 의견을 내놓았습니다. 최종적으로 OPEN_CV나 OpenALPR을 이용하기로 했습니다. 결국 OpenALPR은 안드로이드 시스템에 맞게 컴파일 하기가 힘들어 OPEN_CV를 사용하게 되었습니다.
또한 ESP32_CAM으로 생성한 이미지를 앱에서 처리할 것인지, 서버에서 처리하고 가공 된 데이터만 앱으로 보낼것인지 계속 해서 논의했습니다. 결과적으로 현재는 앱에서 직접 이미지를 처리하고 있으나, 차후 진행방향에 따라 더 좋은 방향으로 언제든지 바꿀 생각입니다.

- 문제해결과정
각자 맡은 파트를 진행해나가며 의문점이 생기거나 더 좋은 아이디어가 생기면 바로바로 팀원들과 적극적으로 소통하며 브레인 스토밍을 하는 중입니다.
ESP32 CAM에서 스트리밍하는 동영상을 같은 네트워크 안에서만 확인가능하다는 문제점을 발견하였고, 팀원들과 바로 소통하며 문제 해결 방안을 찾았습니다. 여러가지 방안이 나왔지만 AWS 서버를 통해 스트리밍 하는 방안으로 문제를 해결하였습니다.

또한 지금도 계속해서 브레인 스토밍을 해나가고 있습니다. 기존아이디어는 초음파 센서로 차량을 인식시에만, 사진을 전송하고 사진데이터는 가공한 뒤 저장하지 않고 버리는 아이디어였습니다. 현재는 스트리밍 데이터를 계속해서 송출하고, 일정시간 차량이 인식 될 경우 아마존 서버를 통한 DB에 사진을 저장하는 것에 대해 논의중입니다.


### Teams

- 팀 구성원 : 김선혁, 김연후, 천지환

<img src="https://github.com/YeonHoo-Kim/Capston_Design1_Projects/blob/master/images/JK_Hq_20200405_250438869_1211894836.jpg" width="100" height="100"><img src="https://github.com/YeonHoo-Kim/Capston_Design1_Projects/blob/master/images/20141515_%EA%B9%80%EC%97%B0%ED%9B%84.jpg" width="100" height="100"><img src="https://github.com/YeonHoo-Kim/Capston_Design1_Projects/blob/master/images/20141362_%EC%B2%9C%EC%A7%80%ED%99%98.jpg" width="100" height="100">
- 역할
  - 김선혁 : 앱 개발
  (1.앱 UI 디자인
   2.Android Studio를 이용해서 앱 뼈대 구축
   3.앱과 서버연동 관련 프로그래밍
   4.자료검색 및 필요도서 대여
   5.구글 영어자료 해석)

  - 김연후 : 서버 구축
  (1.DB서버 구축
   2.Android Studio를 이용하여 구현한 앱과 Amazon Ubuntu 서버 연동
   3.차량번호별 불법주차 누적횟수(블랙리스트) 기능 구현
   4.깃허브 관리
   5.회의 주관 및 기록)
   
  - 천지환 : 센서 연동
  (1.주차 상태를 초음파 센서(HC-SR04)로 감지 (Aduino 이용 예상)
   2.주차된 차량의 번호판을 카메라 모듈(OV2640M)로 감지하여 차량번호 추출 (Aduino, OpenCV 이용 예상)
   3.지인차량 추가기능 구현
   4.위키 내용 정리 및 관리 
   5.현장조사)

- 핵심 기여 역량 : 
- committer 역할 : 김연후
